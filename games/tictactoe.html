<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Piškvorky (Tic Tac Toe) - Mě to nebaví CZ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script src="../assets/theme.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: clamp(16px, 3vw, 32px);
      gap: 1rem;
    }
    header {
      text-align: center;
    }
    #gameBoard {
      width: min(90vw, 320px);
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 10px;
      justify-content: center;
    }
    .cell {
      aspect-ratio: 1 / 1;
      background: var(--surface);
      border-radius: 14px;
      border: 1px solid var(--surface-border);
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: clamp(2.4rem, 10vw, 3.4rem);
      cursor: pointer;
      user-select: none;
      transition: background-color 0.2s ease, transform 0.2s ease;
    }
    .cell:hover {
      background-color: var(--surface-2);
    }
    .cell:active {
      transform: scale(0.98);
    }
  </style>
</head>
<body class="game-page">
  <header>
    <h1 class="hero-title">Piškvorky</h1>
    <p class="hero-subtitle">Hrajte proti kamarádovi nebo sami.</p>
  </header>

  <div class="panel game-shell" role="main" aria-label="Piškvorky">
    <div id="gameBoard" role="grid" aria-label="Piškvorky hra">
      <!-- 9 cells -->
      <div class="cell" data-index="0" role="gridcell" aria-label="Pole 1"></div>
      <div class="cell" data-index="1" role="gridcell" aria-label="Pole 2"></div>
      <div class="cell" data-index="2" role="gridcell" aria-label="Pole 3"></div>
      <div class="cell" data-index="3" role="gridcell" aria-label="Pole 4"></div>
      <div class="cell" data-index="4" role="gridcell" aria-label="Pole 5"></div>
      <div class="cell" data-index="5" role="gridcell" aria-label="Pole 6"></div>
      <div class="cell" data-index="6" role="gridcell" aria-label="Pole 7"></div>
      <div class="cell" data-index="7" role="gridcell" aria-label="Pole 8"></div>
      <div class="cell" data-index="8" role="gridcell" aria-label="Pole 9"></div>
    </div>
    <div class="controls">
      <button id="btnRestart" class="btn btn-secondary">Restart</button>
    </div>
  </div>
  <a href="../games.html" class="link-back">Zpět na výběr her</a>

  <script>
    const cells = document.querySelectorAll('.cell');
    let board = Array(9).fill(null);
    let currentPlayer = 'X';
    let gameActive = true;

    function checkWin() {
      const winPatterns = [
        [0,1,2], [3,4,5], [6,7,8], // rows
        [0,3,6], [1,4,7], [2,5,8], // columns
        [0,4,8], [2,4,6]           // diagonals
      ];
      for (const pattern of winPatterns) {
        const [a,b,c] = pattern;
        if (board[a] && board[a] === board[b] && board[a] === board[c]) {
          return board[a];
        }
      }
      return null;
    }

    function checkDraw() {
      return board.every(cell => cell !== null);
    }

    function updateStatus(message) {
      alert(message);
    }

    function handleCellClick(e) {
      const index = e.target.getAttribute('data-index');
      if (!gameActive || board[index]) return;

      board[index] = currentPlayer;
      e.target.textContent = currentPlayer;

      const winner = checkWin();
      if (winner) {
        updateStatus(`Hráč ${winner} vyhrál!`);
        gameActive = false;
        return;
      }

      if (checkDraw()) {
        updateStatus('Remíza!');
        gameActive = false;
        return;
      }

      currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
    }

    cells.forEach(cell => cell.addEventListener('click', handleCellClick));

    document.getElementById('btnRestart').addEventListener('click', () => {
      board = Array(9).fill(null);
      cells.forEach(cell => cell.textContent = '');
      currentPlayer = 'X';
      gameActive = true;
    });
  </script>
</body>
</html>
