<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Šibenice (Hangman) - Mě to nebaví CZ</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../assets/theme.css" />
  <script src="../assets/theme.js" defer></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: clamp(16px, 3vw, 32px);
      gap: 1rem;
    }
    header {
      text-align: center;
    }
    #wordDisplay {
      font-size: clamp(1.6rem, 4vw, 2.2rem);
      letter-spacing: 0.35rem;
      margin: 0.5rem 0 0.75rem;
      user-select: none;
      color: var(--text);
    }
    #letters {
      width: min(92vw, 420px);
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(36px, 1fr));
      gap: 8px;
      justify-items: center;
    }
    .letter {
      width: 40px;
      height: 40px;
      background: var(--surface);
      border: 1px solid var(--surface-border);
      border-radius: 10px;
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      font-size: 1.2rem;
      cursor: pointer;
      user-select: none;
      transition: transform 0.15s ease, background-color 0.2s ease;
    }
    .letter:active {
      transform: translateY(1px);
    }
    .letter.used {
      background: var(--surface-2);
      cursor: default;
      color: var(--text-muted);
      box-shadow: none;
    }
    #status {
      min-height: 2rem;
      font-weight: 600;
      font-size: 1rem;
    }
  </style>
</head>
<body class="game-page">
  <header>
    <h1 class="hero-title">Šibenice</h1>
    <p class="hero-subtitle">Hádejte slova dříve než se šibenice dokončí.</p>
  </header>

  <!--<div id="hangmanImage" class="mb-4 text-center">
    <img src="https://upload.wikimedia.org/wikipedia/commons/7/7a/Hangman-0.png" alt="Šibenice" id="hangmanImg" class="mx-auto" style="max-width: 200px;" />
  </div>-->

  <div class="panel game-shell" role="main" aria-label="Šibenice">
    <div id="wordDisplay" aria-label="Zobrazované slovo"></div>
    <div id="letters" role="group" aria-label="Písmena k výběru"></div>
    <p id="status" class="status" aria-live="polite"></p>
    <div class="controls">
      <button id="btnRestart" class="btn btn-secondary">Restart</button>
    </div>
  </div>
  <a href="../games.html" class="link-back">Zpět na výběr her</a>

  <script>
    const words = ['auto', 'dům', 'pes', 'kočka', 'strom', 'kolo', 'hra', 'slovo', 'mír', 'les', 'ryba', 'hora', 'zámek', 'most', 'vlak', 'kniha', 'okno', 'květina', 'pták', 'řeka'];
    let selectedWord = '';
    let guessedLetters = [];
    let wrongGuesses = 0;
    const maxWrongGuesses = 6;

    const wordDisplay = document.getElementById('wordDisplay');
    const lettersContainer = document.getElementById('letters');
    const status = document.getElementById('status');
    const hangmanImg = document.getElementById('hangmanImg');

    function chooseWord() {
      selectedWord = words[Math.floor(Math.random() * words.length)];
    }

    function displayWord() {
      const display = selectedWord.split('').map(letter => (guessedLetters.includes(letter) ? letter : '_')).join(' ');
      wordDisplay.textContent = display;
    }

    function createLetterButtons() {
      lettersContainer.innerHTML = '';
      for (let i = 97; i <= 122; i++) {
        const letter = String.fromCharCode(i);
        const button = document.createElement('button');
        button.textContent = letter;
        button.classList.add('letter');
        button.setAttribute('aria-label', `Písmeno ${letter}`);
        button.addEventListener('click', () => handleGuess(letter));
        lettersContainer.appendChild(button);
      }
    }

    function handleGuess(letter) {
      if (guessedLetters.includes(letter)) return;
      guessedLetters.push(letter);
      const buttons = document.querySelectorAll('.letter');
      buttons.forEach(btn => {
        if (btn.textContent === letter) {
          btn.classList.add('used');
          btn.disabled = true;
        }
      });

      if (!selectedWord.includes(letter)) {
        wrongGuesses++;
        updateHangmanImage();
      }

      displayWord();
      checkGameStatus();
    }

    function updateHangmanImage() {
      // hangmanImg.src = `https://upload.wikimedia.org/wikipedia/commons/7/7a/Hangman-${wrongGuesses}.png`;
    }

    function checkGameStatus() {
      if (!wordDisplay.textContent.includes('_')) {
        status.textContent = 'Gratulujeme! Vyhráli jste.';
        disableAllLetters();
      } else if (wrongGuesses >= maxWrongGuesses) {
        status.textContent = `Prohráli jste! Slovo bylo: ${selectedWord}`;
        disableAllLetters();
      } else {
        status.textContent = `Špatné pokusy: ${wrongGuesses} z ${maxWrongGuesses}`;
      }
    }

    function disableAllLetters() {
      const buttons = document.querySelectorAll('.letter');
      buttons.forEach(btn => btn.disabled = true);
    }

    function initGame() {
      guessedLetters = [];
      wrongGuesses = 0;
      chooseWord();
      displayWord();
      createLetterButtons();
      status.textContent = '';
      updateHangmanImage();
    }

    document.getElementById('btnRestart').addEventListener('click', () => {
      initGame();
    });

    initGame();
  </script>
</body>
</html>
